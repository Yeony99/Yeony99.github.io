{"componentChunkName":"component---src-templates-blog-post-js","path":"/tech/nextjs-2","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"category":"tech","slug":"/tech/nextjs-2","tags":["Nextjs"],"date":"2023-07-07","img":null,"title":"Nextjs SEO 설정하기"},"excerpt":"검색 엔진 최적화(SEO)를 Next.js에서 설정하는 방법을 정리한다. Next.js에서는 메타데이터를 다룰 수 있게 내장  컴포넌트를 제공하고 있다. next/head…","html":"<p>검색 엔진 최적화(SEO)를 Next.js에서 설정하는 방법을 정리한다.</p>\n<p>Next.js에서는 메타데이터를 다룰 수 있게 내장 <code class=\"language-text\">head</code> 컴포넌트를 제공하고 있다.</p>\n<h2 id=\"nexthead\" style=\"position:relative;\">next/head<a href=\"#nexthead\" aria-label=\"nexthead permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">import Head from &#39;next/head&#39;\r\n \r\nfunction IndexPage() {\r\n  return (\r\n    &lt;div&gt;\r\n      &lt;Head&gt;\r\n        &lt;title&gt;My page title&lt;/title&gt;\r\n        &lt;meta property=&quot;og:title&quot; content=&quot;My page title&quot; key=&quot;title&quot; /&gt;\r\n      &lt;/Head&gt;\r\n      &lt;Head&gt;\r\n        &lt;meta property=&quot;og:title&quot; content=&quot;My new title&quot; key=&quot;title&quot; /&gt;\r\n      &lt;/Head&gt;\r\n      &lt;p&gt;Hello world!&lt;/p&gt;\r\n    &lt;/div&gt;\r\n  )\r\n}\r\n \r\nexport default IndexPage</code>\n        </deckgo-highlight-code>\n<p>주의해야 할 점이 있다. <code class=\"language-text\">title</code>, <code class=\"language-text\">meta</code> 등 <code class=\"language-text\">&lt;Head>&lt;/Head></code> 안에 들어가게 할 태그들은 <code class=\"language-text\">Head</code> 바로 아래 children 요소로 넣거나, <code class=\"language-text\">&lt;>&lt;/></code> Fragment 속에 넣어야 한다. 다른 태그 아래 넣게 되면 제대로 동작하지 않는다.</p>\n<h3 id=\"_app과-_document\" style=\"position:relative;\">_app과 _document<a href=\"#_app%EA%B3%BC-_document\" aria-label=\"_app과 _document permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Next.js에는 페이지에 공통으로 적용할 내용을 작성할 수 있게 <code class=\"language-text\">_app</code>과 <code class=\"language-text\">_document</code> 를 제공한다.</p>\n<p><code class=\"language-text\">_app</code>은 서버 요청이 들어왔을 때 <strong>가장 먼저 실행되는</strong> 컴포넌트로, <strong>공통 레이아웃</strong>을 제작할 때 사용한다.</p>\n<p><code class=\"language-text\">_document</code>는 <code class=\"language-text\">_app</code> 다음으로 실행되고, 메타 태그나 <code class=\"language-text\">&lt;body></code> 태그 안에 들어갈 내용을 커스터마이징 할 때 사용한다.</p>\n<h4 id=\"_document-작성-시-주의\" style=\"position:relative;\">_document 작성 시 주의<a href=\"#_document-%EC%9E%91%EC%84%B1-%EC%8B%9C-%EC%A3%BC%EC%9D%98\" aria-label=\"_document 작성 시 주의 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p>Nextjs에서는 <code class=\"language-text\">Head</code> 컴포넌트가 2개 있다. import 되는 경로의 차이가 있는데, 아래와 같다.</p>\n<ul>\n<li><code class=\"language-text\">next/head</code>의 Head : 오픈 그래프(OG), 메타 데이터를 정의할 때 사용</li>\n<li><code class=\"language-text\">next/document</code>의 Head : 모든 페이지에 공통으로 사용되는 코드가 있을 때 사용</li>\n</ul>\n<p><code class=\"language-text\">_document</code>에 메타 태그를 작성할 경우, <code class=\"language-text\">next/document</code> 는 <strong>서버 컴포넌트</strong> 이기 때문에, 클라이언트 사이드와 관계 없는 태그만 넣어야 한다.</p>\n<p>예를 들어, 화면마다 다른 <code class=\"language-text\">title</code> 을 넣게 되면<br>\n<img src=\"https://github.com/Yeony99/Yeony99/assets/76241233/7bcbfcdc-52e3-47d0-90e5-2789a3c85a2f\" alt=\"no document title\"></p>\n<p>이렇게 title 태그는 _document.js에 넣을 수 없다고 에러를 띄운다.</p>\n<h2 id=\"react-환경에서의-seo\" style=\"position:relative;\">React 환경에서의 SEO<a href=\"#react-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-seo\" aria-label=\"react 환경에서의 seo permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>위에 설명한 title, meta 태그들은 정적 페이지인 경우 문제가 생기지 않지만, 동적 페이지의 경우에는 SEO 처리가 어렵다. React가 기본적으로 CSR(Client Side Rendering)을 하기 때문이다.</p>\n<p>CSR의 과정은 1. 브라우저가 서버가 전달하는 html 문서 수신 2. API 요청 3. 응답받은 데이터를 화면에 프린트 순으로 이뤄진다.<br>\ntitle에 동적 페이지의 제목을 달고 싶은데, 이미 html은 그려져 있는 상태가 된다.</p>\n<h3 id=\"ssr-처리하기\" style=\"position:relative;\">SSR 처리하기<a href=\"#ssr-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"ssr 처리하기 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Next.js에서는 이 부분을 간편하게 처리할 수 있다. SSR(Server Side Rendering) 기능을 기본 제공한다.</p>\n<p>SSR을 사용하기 위해서는 렌더링될 페이지에 <code class=\"language-text\">getServerSideProps</code> 함수를 사용하면 된다.</p>\n<p>이 함수가 활용되는 방식은 이러하다.</p>\n<ol>\n<li>페이지 렌더링 전 getServerSideProps 내에서 API 호출</li>\n<li>API Response 받기</li>\n<li>Response를 Page에 props로 리턴</li>\n<li>페이지 렌더링</li>\n</ol>\n<deckgo-highlight-code language=\"tsx\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">export default function Page({data}) {\r\n  return (\r\n    // view\r\n    // Head에 data 넘겨주기\r\n  )\r\n}\r\n\r\nexport async function getServerSideProps(context: GetServerSideProps) {\r\n  try {\r\n    // API 호출\r\n    const data = await axios.get(`/api/page`);\r\n\r\n    return {\r\n      props: {\r\n        data\r\n      }\r\n    }\r\n  } catch(error) {\r\n    console.log(error)\r\n  }\r\n}</code>\n        </deckgo-highlight-code>\n<h3 id=\"페이지-별로-다른-메타-태그-적용하기\" style=\"position:relative;\">페이지 별로 다른 메타 태그 적용하기<a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%B3%84%EB%A1%9C-%EB%8B%A4%EB%A5%B8-%EB%A9%94%ED%83%80-%ED%83%9C%EA%B7%B8-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"페이지 별로 다른 메타 태그 적용하기 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>각각의 페이지 별로 title이나 description을 다르게 해야한다. 이런 경우 컴포넌트를 생성해 처리하는 것이 편리하다.</p>\n<deckgo-highlight-code language=\"tsx\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">import Head from &quot;next/head&quot;;\r\n\r\ninterface HeadMetaProps {\r\n  title?: string;\r\n  description?: string;\r\n  url?: string;\r\n  author?: string;\r\n  image: string;\r\n}\r\n\r\nconst HeadMeta: React.FC&lt;HeadMetaProps&gt; = ({\r\n  title,\r\n  description,\r\n  url,\r\n  author,\r\n  image,\r\n}) =&gt; {\r\n  return (\r\n    &lt;Head&gt;\r\n      &lt;title&gt;{title || &quot;웹사이트의 기본 노출될 타이틀&quot;}&lt;/title&gt;\r\n      &lt;meta\r\n        name=&quot;description&quot;\r\n        content={\r\n          description ||\r\n          &quot;웹사이트의 기본 설명&quot;\r\n        }\r\n      /&gt;\r\n      &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1.0, width=device-width&quot; /&gt;\r\n      &lt;meta property=&quot;og:title&quot; content={title || &quot;기본 타이틀&quot;} /&gt;\r\n      &lt;meta property=&quot;og:type&quot; content=&quot;website&quot; /&gt;\r\n      &lt;meta property=&quot;og:url&quot; content={url || &quot;https://사이트 메인 주소&quot;} /&gt;\r\n      &lt;meta property=&quot;og:image&quot; content={image} /&gt;\r\n      &lt;meta property=&quot;og:article:author&quot; content={author || &quot;기본 적용 작성자&quot;} /&gt;\r\n    &lt;/Head&gt;\r\n  );\r\n};\r\n\r\nexport default HeadMeta;\r\n</code>\n        </deckgo-highlight-code>\n<h2 id=\"reference\" style=\"position:relative;\">Reference<a href=\"#reference\" aria-label=\"reference permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>도서 &#x3C;실전에서 바로 쓰는 Next.js></p>","internal":{"content":"검색 엔진 최적화(SEO)를 Next.js에서 설정하는 방법을 정리한다.\r\n\r\nNext.js에서는 메타데이터를 다룰 수 있게 내장 `head` 컴포넌트를 제공하고 있다.   \r\n\r\n## next/head\r\n\r\n```jsx\r\nimport Head from 'next/head'\r\n \r\nfunction IndexPage() {\r\n  return (\r\n    <div>\r\n      <Head>\r\n        <title>My page title</title>\r\n        <meta property=\"og:title\" content=\"My page title\" key=\"title\" />\r\n      </Head>\r\n      <Head>\r\n        <meta property=\"og:title\" content=\"My new title\" key=\"title\" />\r\n      </Head>\r\n      <p>Hello world!</p>\r\n    </div>\r\n  )\r\n}\r\n \r\nexport default IndexPage\r\n```\r\n\r\n주의해야 할 점이 있다. `title`, `meta` 등 `<Head></Head>` 안에 들어가게 할 태그들은 `Head` 바로 아래 children 요소로 넣거나, `<></>` Fragment 속에 넣어야 한다. 다른 태그 아래 넣게 되면 제대로 동작하지 않는다.\r\n\r\n### _app과 _document\r\n\r\nNext.js에는 페이지에 공통으로 적용할 내용을 작성할 수 있게 `_app`과 `_document` 를 제공한다.\r\n\r\n`_app`은 서버 요청이 들어왔을 때 **가장 먼저 실행되는** 컴포넌트로, **공통 레이아웃**을 제작할 때 사용한다.\r\n\r\n`_document`는 `_app` 다음으로 실행되고, 메타 태그나 `<body>` 태그 안에 들어갈 내용을 커스터마이징 할 때 사용한다.\r\n\r\n#### _document 작성 시 주의\r\n\r\nNextjs에서는 `Head` 컴포넌트가 2개 있다. import 되는 경로의 차이가 있는데, 아래와 같다. \r\n* `next/head`의 Head : 오픈 그래프(OG), 메타 데이터를 정의할 때 사용\r\n* `next/document`의 Head : 모든 페이지에 공통으로 사용되는 코드가 있을 때 사용\r\n\r\n`_document`에 메타 태그를 작성할 경우, `next/document` 는 **서버 컴포넌트** 이기 때문에, 클라이언트 사이드와 관계 없는 태그만 넣어야 한다.\r\n\r\n예를 들어, 화면마다 다른 `title` 을 넣게 되면   \r\n![no document title](https://github.com/Yeony99/Yeony99/assets/76241233/7bcbfcdc-52e3-47d0-90e5-2789a3c85a2f)\r\n\r\n이렇게 title 태그는 _document.js에 넣을 수 없다고 에러를 띄운다.\r\n\r\n\r\n## React 환경에서의 SEO\r\n\r\n위에 설명한 title, meta 태그들은 정적 페이지인 경우 문제가 생기지 않지만, 동적 페이지의 경우에는 SEO 처리가 어렵다. React가 기본적으로 CSR(Client Side Rendering)을 하기 때문이다.\r\n\r\nCSR의 과정은 1. 브라우저가 서버가 전달하는 html 문서 수신 2. API 요청 3. 응답받은 데이터를 화면에 프린트 순으로 이뤄진다.   \r\ntitle에 동적 페이지의 제목을 달고 싶은데, 이미 html은 그려져 있는 상태가 된다. \r\n\r\n\r\n### SSR 처리하기\r\n\r\nNext.js에서는 이 부분을 간편하게 처리할 수 있다. SSR(Server Side Rendering) 기능을 기본 제공한다.\r\n\r\nSSR을 사용하기 위해서는 렌더링될 페이지에 `getServerSideProps` 함수를 사용하면 된다.\r\n\r\n이 함수가 활용되는 방식은 이러하다.\r\n1. 페이지 렌더링 전 getServerSideProps 내에서 API 호출\r\n2. API Response 받기\r\n3. Response를 Page에 props로 리턴\r\n4. 페이지 렌더링\r\n\r\n```tsx\r\nexport default function Page({data}) {\r\n  return (\r\n    // view\r\n    // Head에 data 넘겨주기\r\n  )\r\n}\r\n\r\nexport async function getServerSideProps(context: GetServerSideProps) {\r\n  try {\r\n    // API 호출\r\n    const data = await axios.get(`/api/page`);\r\n\r\n    return {\r\n      props: {\r\n        data\r\n      }\r\n    }\r\n  } catch(error) {\r\n    console.log(error)\r\n  }\r\n}\r\n```\r\n\r\n\r\n### 페이지 별로 다른 메타 태그 적용하기\r\n\r\n각각의 페이지 별로 title이나 description을 다르게 해야한다. 이런 경우 컴포넌트를 생성해 처리하는 것이 편리하다.\r\n\r\n```tsx\r\nimport Head from \"next/head\";\r\n\r\ninterface HeadMetaProps {\r\n  title?: string;\r\n  description?: string;\r\n  url?: string;\r\n  author?: string;\r\n  image: string;\r\n}\r\n\r\nconst HeadMeta: React.FC<HeadMetaProps> = ({\r\n  title,\r\n  description,\r\n  url,\r\n  author,\r\n  image,\r\n}) => {\r\n  return (\r\n    <Head>\r\n      <title>{title || \"웹사이트의 기본 노출될 타이틀\"}</title>\r\n      <meta\r\n        name=\"description\"\r\n        content={\r\n          description ||\r\n          \"웹사이트의 기본 설명\"\r\n        }\r\n      />\r\n      <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\" />\r\n      <meta property=\"og:title\" content={title || \"기본 타이틀\"} />\r\n      <meta property=\"og:type\" content=\"website\" />\r\n      <meta property=\"og:url\" content={url || \"https://사이트 메인 주소\"} />\r\n      <meta property=\"og:image\" content={image} />\r\n      <meta property=\"og:article:author\" content={author || \"기본 적용 작성자\"} />\r\n    </Head>\r\n  );\r\n};\r\n\r\nexport default HeadMeta;\r\n\r\n```\r\n\r\n\r\n\r\n## Reference\r\n도서 &lt;실전에서 바로 쓰는 Next.js&gt;"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#nexthead\">next/head</a></p>\n<ul>\n<li>\n<p><a href=\"#_app%EA%B3%BC-_document\">_app과 _document</a></p>\n<ul>\n<li><a href=\"#_document-%EC%9E%91%EC%84%B1-%EC%8B%9C-%EC%A3%BC%EC%9D%98\">_document 작성 시 주의</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#react-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-seo\">React 환경에서의 SEO</a></p>\n<ul>\n<li><a href=\"#ssr-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B8%B0\">SSR 처리하기</a></li>\n<li><a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%B3%84%EB%A1%9C-%EB%8B%A4%EB%A5%B8-%EB%A9%94%ED%83%80-%ED%83%9C%EA%B7%B8-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\">페이지 별로 다른 메타 태그 적용하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reference\">Reference</a></p>\n</li>\n</ul>"}}]}},"pageContext":{"slug":"/tech/nextjs-2"}},"staticQueryHashes":["2665612806"]}