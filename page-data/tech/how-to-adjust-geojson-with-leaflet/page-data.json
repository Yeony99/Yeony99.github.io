{"componentChunkName":"component---src-templates-blog-post-js","path":"/tech/how-to-adjust-geojson-with-leaflet","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"category":"tech","slug":"/tech/how-to-adjust-geojson-with-leaflet","tags":["JS"],"date":"2023-10-31","img":null,"title":"Leaflet에 GeoJson 불러오기 in React"},"excerpt":"요구사항 전국 지도를 띄우고 광역시/도별 행정구역으로 border 처리 각 구역을 clickable…","html":"<!-- geojson 만드는 방법, 변환 링크 등... -->\n<h2 id=\"요구사항\" style=\"position:relative;\">요구사항<a href=\"#%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD\" aria-label=\"요구사항 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ol>\n<li>전국 지도를 띄우고</li>\n<li>광역시/도별 행정구역으로 border 처리</li>\n<li>각 구역을 clickable하게</li>\n</ol>\n<p>만들어야 했다.</p>\n<p>먼저 각 행정구역별로 지도를 그릴 수 있게 좌표 정보를 받아야 했다.</p>\n<hr>\n<h2 id=\"행정구역-데이터-다운로드\" style=\"position:relative;\">행정구역 데이터 다운로드<a href=\"#%ED%96%89%EC%A0%95%EA%B5%AC%EC%97%AD-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\" aria-label=\"행정구역 데이터 다운로드 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><a href=\"http://www.gisdeveloper.co.kr/?p=2332&ref=park9eon.com\" target=\"_blank\">공간정보시스템 - 딥러닝 기반 기술 연구소</a></p>\n<p>여기서 좌표계 prj 파일(GRS80 UTM-K / EPSG:5179)과 최신 행정구역(SHP) 정보를 다운로드하였다.</p>\n<p>간단하게 이 정보들이 무얼 의미하는지 살펴보자.</p>\n<br/>\n<h3 id=\"shapefile\" style=\"position:relative;\">Shapefile<a href=\"#shapefile\" aria-label=\"shapefile permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><strong>Shapefile</strong>은 지리/공간 백터 데이터를 저장하는 파일 형식이다.</p>\n<p>벡터이미지는 svg 이미지를 다뤄봤다면 알고 있을텐데, 점과 점을 연결해 그림을 그리는 방식이다. path를 기억하기 때문에 이미지의 크기를 줄이고 늘리는 것에 구애받지 않는 것이 특징이다.</p>\n<p>이런 정보들을 지형 정보로 담는 것이다. <code class=\"language-text\">.shp</code> 확장자를 가진 SHP파일은 벡터 지리공간 정보를 담고 있다. 하지만 공간정보시스템에서 다운로드 받은 파일은 총 4가지가 될텐데, 각각은 다음과 같다.</p>\n<ul>\n<li>.shp: 지리지형공간 데이터. 기하학적 정보를 저장</li>\n<li>.dbf: dBASE 파일로 .shp 파일과 관련된 속성 정보를 저장하는 파일</li>\n<li>.shx: shape index 파일로 .shp과 함께 사용되는 선택적 인덱스 파일. 특정 모양을 빠르게 찾을 수 있도록 돕는 것</li>\n<li>.prj: projection 파일로 좌표 시스템 및 공간에 관련된 참조 정보를 포함. (좌표 단위, 투영 방법 등 세부 정보)</li>\n</ul>\n<p>결국 Shapefile은 하나의 파일 포맷이 아니라 3개의 확장 포맷(dbf, shp, shx)을 통틀어 Shapefile이라 한다.</p>\n<h3 id=\"geojson\" style=\"position:relative;\">GeoJSON<a href=\"#geojson\" aria-label=\"geojson permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>하지만 저런 파일은 기본적으로 컴퓨터에서 열 수 있게 제공되는 파일 형식도 아니고, 웹(Javascript)도 읽지 못한다.\r\n따라서 자바스크립트가 읽을 수 있게끔 Geometry + JSON 형식으로 변환하여 주는 과정이 필요하다.</p>\n<p>변환은 간편하게 웹에서 가능하다.</p>\n<p><a href=\"https://mapshaper.org/?ref=park9eon.com\" target=\"_blank\">mapshaper</a></p>\n<p>위 사이트에 접속해서 공간정보시스템에서 다운로드 받은 4개 파일을 업로드하면 된다.</p>\n<p><img src=\"https://github.com/Yeony99/Yeony99.github.io/assets/76241233/78a3c44e-82ce-440a-b9ca-cef30d828f07\" alt=\"mapshaper에 파일 업로드\"></p>\n<p>파일명을 모두 동일하게 맞춰주는 것이 좋은데, 하지 않아도 작동되는 것으로 확인되었다.</p>\n<p>여기서 제대로 행정구역 정보를 사용하고 싶다면! Options에 <code class=\"language-text\">encoding=\"euc-kr\"</code> 인코딩을 꼭 입력해주자.\r\n<img src=\"https://github.com/Yeony99/Yeony99.github.io/assets/76241233/e941592b-8751-4536-afe9-578fa4b6be63\" alt=\"mapshaper 인코딩 옵션\"></p>\n<p>옵션을 입력하지 않은 경우 기껏 변환한 json 파일을 열었을 때 한글이 깨져 있는 것을 볼 수 있을 것이다. <del>(자전적 발언)</del></p>\n<p>import 버튼을 누르면 예쁘게 잘 그려져 있는 지도를 볼 수 있다.</p>\n<p>이제 GeoJSON으로 내보내기 하면 된다. 우측 상단에 Export 버튼을 클릭 후 File Format으로는 GeoJson을 선택해주자.</p>\n<p><img src=\"https://github.com/Yeony99/Yeony99.github.io/assets/76241233/a324e7ac-f8a5-468b-aca2-67affaf13702\" alt=\"mapshaper export\">\r\n<img src=\"https://github.com/Yeony99/Yeony99.github.io/assets/76241233/cc10f716-0ec9-49bf-946d-b7bef0d421b1\" alt=\"mapshaper export file format\"></p>\n<p>json파일을 열어보면 다음과 같은 형식으로 구성되어 있다.</p>\n<deckgo-highlight-code language=\"json\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">{\r\n  &quot;type&quot;: &quot;FeatureCollection&quot;,\r\n  &quot;features&quot;: [\r\n    {\r\n      &quot;type&quot;: &quot;Feature&quot;,\r\n      &quot;geometry&quot;: {\r\n        &quot;type&quot;: &quot;Polygon&quot;,\r\n        &quot;coordinates&quot;: [\r\n          [...],\r\n          [...],\r\n          ...\r\n        ],\r\n        &quot;properties&quot;: {\r\n          &quot;CTPRVN_CD&quot;: &quot;11&quot;,\r\n          &quot;CTP_ENG_NM&quot;: &quot;Seoul&quot;,\r\n          &quot;CTP_KOR_NM&quot;: &quot;서울특별시&quot;\r\n        }\r\n      },\r\n    },\r\n    {\r\n        &quot;type&quot;: &quot;Feature&quot;,\r\n        &quot;geometry&quot;: {\r\n          &quot;type&quot;: &quot;Polygon&quot;,\r\n          &quot;coordinates&quot;: [\r\n            [...],\r\n            [...],\r\n            ...\r\n          ],\r\n          &quot;properties&quot;: {\r\n            &quot;CTPRVN_CD&quot;: &quot;28&quot;,\r\n            &quot;CTP_ENG_NM&quot;: &quot;Incheon&quot;,\r\n            &quot;CTP_KOR_NM&quot;: &quot;인천광역시&quot;\r\n          }\r\n        },\r\n    },\r\n    {\r\n        ...\r\n    },\r\n  ]\r\n}\r\n</code>\n        </deckgo-highlight-code>\n<p><code class=\"language-text\">features</code> 배열에 각 행정구역별로 <code class=\"language-text\">properties</code>와 <code class=\"language-text\">geometry</code> 정보가 들어가 있어 이걸 기준으로 관리하기로 했다.</p>\n<br/>\n<h3 id=\"react-leaflet\" style=\"position:relative;\">React Leaflet<a href=\"#react-leaflet\" aria-label=\"react leaflet permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Leaflet에도, React Leaflet에도 GeoJSON 기능을 제공한다.</p>\n<p><a href=\"https://leafletjs.com/examples/geojson/\">leafletjs</a>\r\n<a href=\"https://react-leaflet.js.org/docs/api-components/#geojson\">react-leaflet GeoJSON</a></p>\n<p>간편하게 사용하기 위해 React Leaflet을 설치하였다.<br>\n앞서 GeoJSON으로 변환해 다운로드한 파일을 프로젝트 내부에 넣어준 후 import한다.<br>\n나는 Nextjs를 사용 중이라 public 폴더에 GeoJSON파일을 넣었다.</p>\n<deckgo-highlight-code language=\"tsx\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">// components/MapComponent.tsx\r\n\r\nimport { MapContainer, GeoJSON } from &quot;react-leaflet&quot;;\r\nimport &quot;leaflet/dist/leaflet.css&quot;;\r\n\r\n// public 폴더에 위치한 GeoJSON 파일 사용\r\nconst geoJsonData = require(&quot;public/ctprvn.json&quot;);\r\n\r\nconst MapComponent = () =&gt; {\r\n\r\n    // 선택한 지형을\r\n    const [selectedFeature, setSelectedFeature] = useState(\r\n        geoJsonData.features[0] // 기본으로 서울특별시 선택\r\n    );\r\n\r\n    const onEachFeature = (\r\n        feature, // 지도에서 선택된 feature\r\n        layer\r\n    ) =&gt; {\r\n        layer.on({\r\n            click: (e) =&gt; {\r\n                setSelectedFeature(feature);\r\n            },\r\n        });\r\n    };\r\n\r\n    const style = (feature: any) =&gt; {\r\n        // 파라미터로 받은 feature가 이미 선택된 feature인지 확인\r\n        const isSelected = feature === selectedFeature;\r\n\r\n        // 결과에 따라 return할 스타일 정의\r\n        return {\r\n            color: isSelected ? &quot;blue&quot; : &quot;pink&quot;,\r\n            weight: isSelected ? 4 : 2,\r\n            opacity: isSelected ? 1 : 0.7,\r\n        };\r\n    };\r\n\r\n    return (\r\n        &lt;&gt;\r\n            &lt;MapContainer&gt;\r\n                zoomControl={false}\r\n                center={[36.638392, 127.696118]}\r\n                minZoom={6}\r\n                zoom={6}\r\n                style={{ height: &quot;100%&quot;, width: &quot;100%&quot;, background: &quot;#fff&quot; }} \r\n            &gt;\r\n\r\n                &lt;GeoJSON \r\n                    data={geoJSONData}\r\n                    style={style}\r\n                    onEachFeature={onEachFeature}\r\n                /&gt;\r\n            &lt;/MapContainer&gt;\r\n        &lt;/&gt;\r\n    )\r\n}</code>\n        </deckgo-highlight-code>\n<br/>\n<h3 id=\"결과\" style=\"position:relative;\">결과<a href=\"#%EA%B2%B0%EA%B3%BC\" aria-label=\"결과 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><img src=\"https://github.com/Yeony99/Yeony99.github.io/assets/76241233/95412b9c-9c12-40ca-991b-4505f8e0c99d\" alt=\"leaflet-geojson\"></p>\n<p>최종 결과는 위와 같다.</p>\n<br/>\n<hr>\n<h2 id=\"출처\" style=\"position:relative;\">출처<a href=\"#%EC%B6%9C%EC%B2%98\" aria-label=\"출처 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><a href=\"https://park9eon.com/how-to-convert-to-korea-shp-geojson/\">대한민국 행정구역(SHP) GeoJSON으로 변환하는 법</a>\r\n<a href=\"https://react-leaflet.js.org/docs/api-components/#geojson\">react leaflet</a></p>","internal":{"content":"\r\n<!-- geojson 만드는 방법, 변환 링크 등... -->\r\n\r\n## 요구사항 \r\n\r\n1. 전국 지도를 띄우고\r\n2. 광역시/도별 행정구역으로 border 처리\r\n3. 각 구역을 clickable하게\r\n\r\n만들어야 했다. \r\n\r\n먼저 각 행정구역별로 지도를 그릴 수 있게 좌표 정보를 받아야 했다.\r\n\r\n---\r\n\r\n## 행정구역 데이터 다운로드\r\n \r\n<a href=\"http://www.gisdeveloper.co.kr/?p=2332&ref=park9eon.com\" target=\"_blank\">공간정보시스템 - 딥러닝 기반 기술 연구소</a>\r\n\r\n여기서 좌표계 prj 파일(GRS80 UTM-K / EPSG:5179)과 최신 행정구역(SHP) 정보를 다운로드하였다.\r\n\r\n간단하게 이 정보들이 무얼 의미하는지 살펴보자.\r\n\r\n<br/>\r\n\r\n### Shapefile\r\n\r\n**Shapefile**은 지리/공간 백터 데이터를 저장하는 파일 형식이다. \r\n\r\n벡터이미지는 svg 이미지를 다뤄봤다면 알고 있을텐데, 점과 점을 연결해 그림을 그리는 방식이다. path를 기억하기 때문에 이미지의 크기를 줄이고 늘리는 것에 구애받지 않는 것이 특징이다.\r\n\r\n이런 정보들을 지형 정보로 담는 것이다. `.shp` 확장자를 가진 SHP파일은 벡터 지리공간 정보를 담고 있다. 하지만 공간정보시스템에서 다운로드 받은 파일은 총 4가지가 될텐데, 각각은 다음과 같다.\r\n\r\n* .shp: 지리지형공간 데이터. 기하학적 정보를 저장\r\n* .dbf: dBASE 파일로 .shp 파일과 관련된 속성 정보를 저장하는 파일\r\n* .shx: shape index 파일로 .shp과 함께 사용되는 선택적 인덱스 파일. 특정 모양을 빠르게 찾을 수 있도록 돕는 것\r\n* .prj: projection 파일로 좌표 시스템 및 공간에 관련된 참조 정보를 포함. (좌표 단위, 투영 방법 등 세부 정보)\r\n\r\n결국 Shapefile은 하나의 파일 포맷이 아니라 3개의 확장 포맷(dbf, shp, shx)을 통틀어 Shapefile이라 한다.\r\n\r\n\r\n### GeoJSON\r\n\r\n하지만 저런 파일은 기본적으로 컴퓨터에서 열 수 있게 제공되는 파일 형식도 아니고, 웹(Javascript)도 읽지 못한다.\r\n따라서 자바스크립트가 읽을 수 있게끔 Geometry + JSON 형식으로 변환하여 주는 과정이 필요하다.\r\n\r\n변환은 간편하게 웹에서 가능하다.\r\n\r\n<a href=\"https://mapshaper.org/?ref=park9eon.com\" target=\"_blank\">mapshaper</a>\r\n\r\n\r\n위 사이트에 접속해서 공간정보시스템에서 다운로드 받은 4개 파일을 업로드하면 된다. \r\n\r\n![mapshaper에 파일 업로드](https://github.com/Yeony99/Yeony99.github.io/assets/76241233/78a3c44e-82ce-440a-b9ca-cef30d828f07)\r\n\r\n\r\n파일명을 모두 동일하게 맞춰주는 것이 좋은데, 하지 않아도 작동되는 것으로 확인되었다.\r\n\r\n여기서 제대로 행정구역 정보를 사용하고 싶다면! Options에 `encoding=\"euc-kr\"` 인코딩을 꼭 입력해주자.\r\n![mapshaper 인코딩 옵션](https://github.com/Yeony99/Yeony99.github.io/assets/76241233/e941592b-8751-4536-afe9-578fa4b6be63)\r\n\r\n옵션을 입력하지 않은 경우 기껏 변환한 json 파일을 열었을 때 한글이 깨져 있는 것을 볼 수 있을 것이다. ~~(자전적 발언)~~\r\n\r\nimport 버튼을 누르면 예쁘게 잘 그려져 있는 지도를 볼 수 있다.\r\n\r\n이제 GeoJSON으로 내보내기 하면 된다. 우측 상단에 Export 버튼을 클릭 후 File Format으로는 GeoJson을 선택해주자.\r\n\r\n![mapshaper export](https://github.com/Yeony99/Yeony99.github.io/assets/76241233/a324e7ac-f8a5-468b-aca2-67affaf13702)\r\n![mapshaper export file format](https://github.com/Yeony99/Yeony99.github.io/assets/76241233/cc10f716-0ec9-49bf-946d-b7bef0d421b1)\r\n\r\njson파일을 열어보면 다음과 같은 형식으로 구성되어 있다.\r\n\r\n\r\n```json\r\n{\r\n  \"type\": \"FeatureCollection\",\r\n  \"features\": [\r\n    {\r\n      \"type\": \"Feature\",\r\n      \"geometry\": {\r\n        \"type\": \"Polygon\",\r\n        \"coordinates\": [\r\n          [...],\r\n          [...],\r\n          ...\r\n        ],\r\n        \"properties\": {\r\n          \"CTPRVN_CD\": \"11\",\r\n          \"CTP_ENG_NM\": \"Seoul\",\r\n          \"CTP_KOR_NM\": \"서울특별시\"\r\n        }\r\n      },\r\n    },\r\n    {\r\n        \"type\": \"Feature\",\r\n        \"geometry\": {\r\n          \"type\": \"Polygon\",\r\n          \"coordinates\": [\r\n            [...],\r\n            [...],\r\n            ...\r\n          ],\r\n          \"properties\": {\r\n            \"CTPRVN_CD\": \"28\",\r\n            \"CTP_ENG_NM\": \"Incheon\",\r\n            \"CTP_KOR_NM\": \"인천광역시\"\r\n          }\r\n        },\r\n    },\r\n    {\r\n        ...\r\n    },\r\n  ]\r\n}\r\n\r\n```\r\n\r\n`features` 배열에 각 행정구역별로 `properties`와 `geometry` 정보가 들어가 있어 이걸 기준으로 관리하기로 했다. \r\n\r\n<br/>\r\n\r\n### React Leaflet\r\n\r\nLeaflet에도, React Leaflet에도 GeoJSON 기능을 제공한다.   \r\n\r\n[leafletjs](https://leafletjs.com/examples/geojson/)\r\n[react-leaflet GeoJSON](https://react-leaflet.js.org/docs/api-components/#geojson)\r\n\r\n간편하게 사용하기 위해 React Leaflet을 설치하였다.   \r\n앞서 GeoJSON으로 변환해 다운로드한 파일을 프로젝트 내부에 넣어준 후 import한다.   \r\n나는 Nextjs를 사용 중이라 public 폴더에 GeoJSON파일을 넣었다.\r\n\r\n```tsx\r\n// components/MapComponent.tsx\r\n\r\nimport { MapContainer, GeoJSON } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\n// public 폴더에 위치한 GeoJSON 파일 사용\r\nconst geoJsonData = require(\"public/ctprvn.json\");\r\n\r\nconst MapComponent = () => {\r\n\r\n    // 선택한 지형을\r\n    const [selectedFeature, setSelectedFeature] = useState(\r\n        geoJsonData.features[0] // 기본으로 서울특별시 선택\r\n    );\r\n\r\n    const onEachFeature = (\r\n        feature, // 지도에서 선택된 feature\r\n        layer\r\n    ) => {\r\n        layer.on({\r\n            click: (e) => {\r\n                setSelectedFeature(feature);\r\n            },\r\n        });\r\n    };\r\n\r\n    const style = (feature: any) => {\r\n        // 파라미터로 받은 feature가 이미 선택된 feature인지 확인\r\n        const isSelected = feature === selectedFeature;\r\n\r\n        // 결과에 따라 return할 스타일 정의\r\n        return {\r\n            color: isSelected ? \"blue\" : \"pink\",\r\n            weight: isSelected ? 4 : 2,\r\n            opacity: isSelected ? 1 : 0.7,\r\n        };\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <MapContainer>\r\n                zoomControl={false}\r\n                center={[36.638392, 127.696118]}\r\n                minZoom={6}\r\n                zoom={6}\r\n                style={{ height: \"100%\", width: \"100%\", background: \"#fff\" }} \r\n            >\r\n\r\n                <GeoJSON \r\n                    data={geoJSONData}\r\n                    style={style}\r\n                    onEachFeature={onEachFeature}\r\n                />\r\n            </MapContainer>\r\n        </>\r\n    )\r\n}\r\n```\r\n\r\n<br/>\r\n\r\n### 결과\r\n\r\n![leaflet-geojson](https://github.com/Yeony99/Yeony99.github.io/assets/76241233/95412b9c-9c12-40ca-991b-4505f8e0c99d)\r\n\r\n최종 결과는 위와 같다. \r\n\r\n\r\n<br/>\r\n\r\n---\r\n\r\n## 출처\r\n\r\n[대한민국 행정구역(SHP) GeoJSON으로 변환하는 법](https://park9eon.com/how-to-convert-to-korea-shp-geojson/)\r\n[react leaflet](https://react-leaflet.js.org/docs/api-components/#geojson)"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD\">요구사항</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%96%89%EC%A0%95%EA%B5%AC%EC%97%AD-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\">행정구역 데이터 다운로드</a></p>\n<ul>\n<li><a href=\"#shapefile\">Shapefile</a></li>\n<li><a href=\"#geojson\">GeoJSON</a></li>\n<li><a href=\"#react-leaflet\">React Leaflet</a></li>\n<li><a href=\"#%EA%B2%B0%EA%B3%BC\">결과</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B6%9C%EC%B2%98\">출처</a></p>\n</li>\n</ul>"}}]}},"pageContext":{"slug":"/tech/how-to-adjust-geojson-with-leaflet"}},"staticQueryHashes":["2665612806"]}